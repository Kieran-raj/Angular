<div class="row mb-3">
  <div class="col-xl-3 col-4">
    <img alt="User logo" [src]="getImage()" id="user-photo" />
  </div>
  <div
    class="d-flex flex-column justify-content-center col-xl-9 col-6 p-0"
    id="header-text-col"
  >
    <div class="row" id="heading">Profile</div>
    <div class="row" id="sub-heading">Update your details</div>
  </div>
  <div
    class="d-flex d-xl-none justify-content-end align-items-baseline col-2 p-0"
  >
    <button
      class="btn"
      [routerLink]="['/user/', (user$ | async)?.displayName]"
      id="return-back-button"
    >
      <mat-icon>cancel</mat-icon>
    </button>
  </div>
</div>

<form [formGroup]="formGroup">
  <div class="row">
    <div class="d-flex align-items-center col-3 form-labels">Email</div>
    <div class="col-9">
      <input
        class="form-control shadow-none mt-1"
        id="emailInput"
        type="text"
        placeholder="Email"
        formControlName="email"
      />
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="d-flex align-items-center col-3 form-labels">Username</div>
    <div class="col-9">
      <input
        class="form-control shadow-none mt-1"
        id="displayName"
        type="text"
        placeholder="Display Name"
        formControlName="displayName"
      />
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="d-flex align-items-center col-4">
      <div class="form-labels">Your Photo</div>
    </div>
    <div class="col-8">
      <div class="row">
        <div
          class="d-flex justify-content-center align-items-center col-5 pe-0"
        >
          <img alt="User logo" [src]="getImage()" id="user-photo-change" />
        </div>
        <div class="col-7 px-0">
          <input
            #csvInput
            hidden="true"
            type="file"
            onclick="this.value=null"
            (change)="uploadImage($event)"
          />
          <button
            class="float-end"
            mat-flat-button
            id="change-photo-buttons"
            (click)="csvInput.click()"
          >
            Upload
          </button>
          <button
            class="float-end"
            mat-flat-button
            id="change-photo-buttons"
            (click)="deleteImage()"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
  <hr />
  <div class="row">
    <div class="d-flex align-items-center col-3">
      <div class="form-labels">Name</div>
    </div>
    <div class="col-9">
      <div class="row">
        <div class="col-6">
          <label for="firstNameInput">First Name</label>
          <input
            class="form-control shadow-none"
            id="firstNameInput"
            type="text"
            placeholder="First Name"
            formControlName="firstName"
          />
        </div>
        <div class="col-6">
          <label for="lastNameInput">Last Name</label>
          <input
            class="form-control shadow-none"
            id="lastNameInput"
            type="text"
            placeholder="Last Name"
            formControlName="lastName"
          />
        </div>
      </div>
    </div>
  </div>
  <hr id="end-of-form-breakline" />
</form>

<div class="row">
  <div class="col-xl-2 col-3 offset-xl-8 offset-6" id="cancel-button-col">
    <button
      mat-flat-button
      class="float-end"
      id="cancel-button"
      [disabled]="disableCancel"
      *ngIf="!(isSaving$ | async)"
      (click)="cancelCallBack()"
    >
      Cancel
    </button>
  </div>
  <div class="col-xl-2 col-3 ps-0">
    <button
      mat-flat-button
      class="float-end"
      id="update-details-button"
      [disabled]="disableSave"
      (click)="okCallBack()"
      *ngIf="!(isSaving$ | async)"
    >
      Save
    </button>
    <mat-spinner
      [diameter]="35"
      [strokeWidth]="5"
      *ngIf="isSaving$ | async"
    ></mat-spinner>
  </div>
</div>
